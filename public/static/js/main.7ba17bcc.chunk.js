(this.webpackJsonptask_control=this.webpackJsonptask_control||[]).push([[0],{174:function(t,e,a){},175:function(t,e,a){},177:function(t,e,a){},178:function(t,e,a){},179:function(t,e,a){},180:function(t,e,a){},181:function(t,e,a){},182:function(t,e,a){},183:function(t,e,a){},185:function(t,e,a){"use strict";a.r(e);var n=a(3),s=a.n(n),r=a(21),c=a.n(r),o=a(19),i=a(7),u=a(8),l=a(10),p=a(9),d=a(191),h=a(77),b="task_template",j="http://192.168.1.10:3001",m=a(192),v=(a(84),a(0));var f=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).deleteTemplate=function(){t.props.deleteHandler(t.props.template_index,t.props.template.id)},t}return Object(u.a)(a,[{key:"render",value:function(){return this.props.connectDragSource(Object(v.jsxs)("div",{className:"alert alert-dismissible alert-success",isDragging:this.props.isDragging,children:[Object(v.jsx)("button",{type:"button",className:"close","data-dismiss":"alert",onClick:this.deleteTemplate,children:"\xd7"}),Object(v.jsx)("strong",{className:"unselectable",children:this.props.template.title})]}))}}]),a}(s.a.Component),g=Object(m.a)(b,{isDragging:function(t,e){return e.getItem().id===t.template_index},beginDrag:function(t,e,a){return{title:t.template.title,id:t.template.id}}},(function(t,e){return{connectDragSource:t.dragSource(),isDragging:e.isDragging()}}))(f),O=a(23),x=a.n(O),k=(a(46),a(88),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={navDate:t.props.navDate},t.changeDate=function(e){t.setState({navDate:e}),t.props.changeDate(e)},t.exitHandles=function(){t.props.exit()},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary header",children:[Object(v.jsx)("div",{className:"navDate",children:Object(v.jsx)(x.a,{customInput:Object(v.jsx)("input",{type:"text",className:"form-control"}),selected:this.state.navDate,onChange:this.changeDate})}),Object(v.jsx)("button",{type:"button",className:"btn btn-warning btn-sm",onClick:this.exitHandles,children:"\u0412\u044b\u0445\u043e\u0434"})]})}}]),a}(s.a.Component)),w=(a(174),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={startDate:new Date,endDate:new Date},t.changeStartDate=function(e){t.setState({startDate:e}),t.props.chandeReportDate(e,"start")},t.changeEndDate=function(e){t.setState({endDate:e}),t.props.chandeReportDate(e,"end")},t.report=function(){t.props.createReport()},t.closeHanler=function(){t.props.closeReport()},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary footer",children:Object(v.jsxs)("div",{className:"navDate",children:[Object(v.jsx)("div",{className:"margin_mod",children:Object(v.jsx)("h6",{className:"date-title",children:"\u041e\u0442\u0447\u0435\u0442 \u0441:"})}),Object(v.jsx)("div",{className:"margin_mod",children:Object(v.jsx)(x.a,{customInput:Object(v.jsx)("input",{type:"text",className:"form-control"}),selected:this.props.startDate,onChange:this.changeStartDate})}),Object(v.jsx)("div",{className:"margin_mod",children:Object(v.jsx)("h6",{className:"date-title",children:"\u043f\u043e:"})}),Object(v.jsx)("div",{className:"margin_mod",children:Object(v.jsx)(x.a,{customInput:Object(v.jsx)("input",{type:"text",className:"form-control"}),selected:this.props.endDate,onChange:this.changeEndDate})}),Object(v.jsx)("div",{className:"margin_mod",children:Object(v.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:this.report,children:"\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),this.props.reportStat&&Object(v.jsx)("div",{className:"margin_mod",children:Object(v.jsx)("button",{type:"button",className:"btn btn-warning",onClick:this.closeHanler,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})})]})})}}]),a}(s.a.Component)),D=(a(175),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"load jumbotron",children:" Loading... "})}}]),a}(s.a.Component)),y=a(12),T=a.n(y),N=a(14),_=function t(){var e=this;Object(i.a)(this,t),this.domain=function(t){return"".concat(j,"/").concat(t)},this.getDataFromURL=function(){var t=Object(N.a)(T.a.mark((function t(e,a){var n,s,r,c,o=arguments;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>2&&void 0!==o[2]&&o[2],s=o.length>3&&void 0!==o[3]?o[3]:"",r={},c={"Content-Type":"application/json"},n&&(c={authorization:"Basic "+s,"Content-Type":"application/json"}),t.next=7,fetch(e,{method:"post",credentials:"include",headers:c,body:JSON.stringify(a)}).then((function(t){return t.json()})).then((function(t){r=t})).catch((function(t){r={status:-1,result:t}}));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.logout=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("logout"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.authorization=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("login"),{},!0,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.registration=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("registration"),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.saveTaskTemplate=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("createTemplate"),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getTemplates=Object(N.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("getAllTemplates"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),this.getTowns=Object(N.a)(T.a.mark((function t(){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("getAllTowns"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),this.reportTasksDays=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("reportTasksDays"),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getTasks=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("getAllTasks"),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createNewTask=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("createNewTask"),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.actionsFromTask=function(){var t=Object(N.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDataFromURL(e.domain("controllTask"),a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(){function t(e){if(Object(i.a)(this,t),"dev"===e)return this.appservice instanceof _||(this.appservice=new _),this}return Object(u.a)(t,[{key:"saveTaskTemplate",value:function(t){return this.appservice.saveTaskTemplate(t)}},{key:"getTemplates",value:function(){return this.appservice.getTemplates()}},{key:"getTasks",value:function(t){return this.appservice.getTasks(t)}},{key:"getTowns",value:function(){return this.appservice.getTowns()}},{key:"deleteTemplateById",value:function(t){return this.appservice.deleteTemplateById(t)}},{key:"createNewTask",value:function(t){return this.appservice.createNewTask(t)}},{key:"actionsFromTask",value:function(t){return this.appservice.actionsFromTask(t)}},{key:"reportTasksDays",value:function(t){return this.appservice.reportTasksDays(t)}},{key:"authorization",value:function(t){return this.appservice.authorization(t)}},{key:"registration",value:function(t){return this.appservice.registration(t)}},{key:"logout",value:function(){return this.appservice.logout()}}]),t}(),S=(a(177),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={template:{id:0,title:""}},t.prepareTemplate=function(e){var a={};return a.id=e,a.title=t.state.template.title,a},t.changeTitle=function(e){t.setState({template:{id:0,title:e.target.value}})},t.newTemplate=function(){new C("dev").saveTaskTemplate(t.state.template).then((function(e){0===e.status&&(t.props.createHandler(t.prepareTemplate(e.result)),t.setState({template:{id:0,title:""}}))}))},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"form-group create_task__mod",children:[Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430...",id:"inputDefault",value:this.state.template.title,onChange:this.changeTitle}),Object(v.jsx)("button",{type:"button",className:"btn btn-primary btn__paddings",onClick:this.newTemplate,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})}}]),a}(s.a.Component)),H=(a(27),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).play=function(e){t.props.buttonEvent("play")},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("button",{type:"button",className:"btn btn-outline-success",onClick:this.play,children:Object(v.jsxs)("svg",{width:"32",height:"32",fill:"currentColor",className:"bi bi-play-btn",viewBox:"0 0 16 16",children:[Object(v.jsx)("path",{d:"M6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"}),Object(v.jsx)("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})]})})}}]),a}(s.a.Component)),M=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).pause=function(){t.props.buttonEvent("pause")},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("button",{type:"button",className:"btn btn-outline-warning",onClick:this.pause,children:Object(v.jsxs)("svg",{width:"32",height:"32",fill:"currentColor",className:"bi bi-pause-btn",viewBox:"0 0 16 16",children:[Object(v.jsx)("path",{d:"M6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"}),Object(v.jsx)("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})]})})}}]),a}(s.a.Component),F=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).save=function(){t.props.buttonEvent("save")},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("button",{type:"button",className:"btn btn-outline-info",onClick:this.save,children:Object(v.jsxs)("svg",{width:"32",height:"32",fill:"currentColor",className:"bi bi-hdd",viewBox:"0 0 16 16",children:[Object(v.jsx)("path",{d:"M4.5 11a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zM3 10.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"}),Object(v.jsx)("path",{d:"M16 11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V9.51c0-.418.105-.83.305-1.197l2.472-4.531A1.5 1.5 0 0 1 4.094 3h7.812a1.5 1.5 0 0 1 1.317.782l2.472 4.53c.2.368.305.78.305 1.198V11zM3.655 4.26L1.592 8.043C1.724 8.014 1.86 8 2 8h12c.14 0 .276.014.408.042L12.345 4.26a.5.5 0 0 0-.439-.26H4.094a.5.5 0 0 0-.44.26zM1 10v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1z"})]})})}}]),a}(s.a.Component),R=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).close=function(){t.props.buttonEvent("close")},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:this.close,children:Object(v.jsxs)("svg",{width:"32",height:"32",fill:"currentColor",className:"bi bi-x-circle",viewBox:"0 0 16 16",children:[Object(v.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),Object(v.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})]})})}}]),a}(s.a.Component),z=(a(178),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).pad=function(t){return("00"+t).slice(-2)},t.changeTownHandler=function(e){t.props.towns.find((function(a){a.town_title===e.target.value&&t.props.changeTown(a.id,t.props.index,a.town_title)}))},t.changeTaskDesc=function(e){t.props.changeDesc(e.target.value,t.props.index)},t.clickButton=function(e){t.props.buttonsHandler({action:e,id:t.props.task.taskId,description:t.props.task.description,town_id:t.props.task.town_id,index:t.props.index})},t}return Object(u.a)(a,[{key:"DurationToStr",value:function(t){var e="";return e=this.pad(Math.trunc(t/3600))+":",t-=3600*Math.trunc(t/3600),e=e+this.pad(Math.trunc(t/60))+":",t-=60*Math.trunc(t/60),e+this.pad(t)}},{key:"render",value:function(){var t="task-item ",e="",a=Object(v.jsx)(R,{buttonEvent:this.clickButton}),n=this.DurationToStr(this.props.task.duration);1===this.props.task.status&&(e=Object(v.jsx)(H,{buttonEvent:this.clickButton})),2===this.props.task.status&&(e=Object(v.jsx)(M,{buttonEvent:this.clickButton}),t="task-item task_active",n=""),0===this.props.task.status&&(a=""),console.log("".concat(this.props.task.town_id,"  ").concat(this.props.task.town_title));var s=this.props.task.town_title||"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u0443\u0447\u0430\u0441\u0442\u043e\u043a...",r="form-control input__mod";return-1===this.props.task.town_id&&(r="form-control input__mod not__choose"),Object(v.jsxs)("div",{className:t,children:[Object(v.jsx)("div",{className:"task-title",children:this.props.task.title}),Object(v.jsx)("div",{className:"task-time",children:this.props.task.time_start}),Object(v.jsx)("div",{className:"task-time",children:n}),Object(v.jsx)("div",{className:"task-description",children:Object(v.jsx)("input",{className:"form-control input__mod",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435...",value:this.props.task.description,onChange:this.changeTaskDesc})}),Object(v.jsx)("div",{className:"task-place",children:Object(v.jsxs)("select",{className:r,value:s,onChange:this.changeTownHandler,children:[Object(v.jsx)("option",{disabled:!0,selected:!0,children:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u0443\u0447\u0430\u0441\u0442\u043e\u043a..."}),this.props.towns.map((function(t,e){return 0===t.isfilial?Object(v.jsx)("option",{children:t.town_title}):Object(v.jsx)("option",{className:"isfilial",disabled:!0,children:t.town_title})}))]})}),Object(v.jsxs)("div",{className:"task-buttons",children:[this.props.isCurDate&&e,Object(v.jsx)(F,{buttonEvent:this.clickButton}),this.props.isCurDate&&a]})]})}}]),a}(s.a.Component)),A=a(193);a(179);var I=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var t=this;return this.props.connectDropTarget(Object(v.jsxs)("div",{className:"work-task",children:[this.props.isOver&&Object(v.jsx)("div",{className:"table-warning empty",children:Object(v.jsx)("strong",{children:this.props.itemTitle.title})}),this.props.tasks.map((function(e,a){return Object(v.jsx)(z,{task:e,index:a,towns:t.props.towns,buttonsHandler:t.props.buttonsHandler,changeDesc:t.props.changeDesc,changeTown:t.props.changeTown,isCurDate:t.props.isCurDate},a)}))]}))}}]),a}(s.a.Component),L=Object(A.a)(b,{hover:function(t,e,a){},drop:function(t,e,a){t.newTask(e.getItem())}},(function(t,e){return{connectDropTarget:t.dropTarget(),isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),canDrop:e.canDrop(),itemType:e.getItemType(),itemTitle:e.getItem()}}))(I),E=(a(180),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).pad=function(t){return("00"+t).slice(-2)},t.toDate=function(t){var e=t.split(" ",1)[0].split("-");return console.log(e),"".concat(e[2],".").concat(e[1],".").concat(e[0])},t}return Object(u.a)(a,[{key:"DurationToStr",value:function(t){var e="";return e=this.pad(Math.trunc(t/3600))+":",t-=3600*Math.trunc(t/3600),e=e+this.pad(Math.trunc(t/60))+":",t-=60*Math.trunc(t/60),e+this.pad(t)}},{key:"render",value:function(){var t=this;return Object(v.jsx)("div",{className:"report",children:Object(v.jsx)("div",{className:"report-table",children:Object(v.jsxs)("table",{className:"table table-hover",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b"}),Object(v.jsx)("th",{scope:"col",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),Object(v.jsx)("th",{scope:"col",children:"\u041c\u0435\u0441\u0442\u043e \u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0443\u0441\u043b\u0443\u0433\u0438"}),Object(v.jsx)("th",{scope:"col",children:"\u0414\u0430\u0442\u0430"}),Object(v.jsx)("th",{scope:"col",children:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"})]})}),Object(v.jsx)("tbody",{children:this.props.rows.map((function(e,a){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.template_title}),Object(v.jsx)("td",{children:e.description}),Object(v.jsx)("td",{children:e.town_title}),Object(v.jsx)("td",{children:t.toDate(e.datestart)}),Object(v.jsx)("td",{children:t.DurationToStr(e.duration)})]})}))})]})})})}}]),a}(s.a.Component)),B=(a(181),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={name:"",pass:"",fio:"",pass1:"",login:!0,isFIOCorrect:!0,isNameCorrect:!0,isPassCorrect:!0},t.checkData=function(){var e=t.state,a=e.fio,n=e.name,s=e.pass,r=e.pass1,c=!0;return a.trim().length<8&&(c=!1,t.setState({isFIOCorrect:!1})),n.trim().length<5&&(c=!1,t.setState({isNameCorrect:!1})),(s.trim().length<8||s!==r)&&(c=!1,t.setState({isPassCorrect:!1})),c&&t.setState({isFIOCorrect:!0,isNameCorrect:!0,isPassCorrect:!0}),c},t.registration=function(){if(t.checkData()){var e="";try{e=btoa("".concat(t.state.name,":").concat(t.state.pass))}catch(a){return void t.setState({isNameCorrect:!1,isPassCorrect:!1})}t.props.regHandler({fio:t.state.fio,userpass:e})&&t.setState({name:"",pass:"",fio:"",pass1:"",login:!0})}},t.closeHandler=function(){t.props.closeMessage(),t.state.login||t.setState({isFIOCorrect:!0,isNameCorrect:!0,isPassCorrect:!0,login:!0,name:"",pass:"",fio:"",pass1:""})},t.login=function(){var e="";try{e=btoa("".concat(t.state.name,":").concat(t.state.pass))}catch(a){return void t.setState({isNameCorrect:!1,isPassCorrect:!1})}t.props.authHandler(e)},t.turnReg=function(){t.setState({name:"",pass:"",fio:"",pass1:"",login:!1})},t.inputNameHandler=function(e){t.setState({name:e.target.value})},t.inputFIOHandler=function(e){t.setState({fio:e.target.value})},t.inputPassHandler=function(e){t.setState({pass:e.target.value})},t.confirmPassHandler=function(e){t.setState({pass1:e.target.value})},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state,e=t.name,a=t.pass,n=t.login,s=t.fio,r=t.pass1,c=t.isFIOCorrect,o=t.isPassCorrect,i=t.isNameCorrect,u=this.props,l=u.registrationOk,p=u.authResult,d="form-control";c||(d="form-control is-invalid");var h="form-control";i||(h="form-control is-invalid");var b="form-control";return o||(b="form-control is-invalid"),Object(v.jsxs)("div",{className:"toast show toast__mod",role:"alert","aria-live":"assertive","aria-atomic":"true",children:[Object(v.jsxs)("div",{className:"toast-header",children:[Object(v.jsx)("strong",{className:"mr-auto",children:"\u0412\u0445\u043e\u0434\\\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(v.jsx)("button",{type:"button",className:"ml-2 mb-1 close","data-dismiss":"toast","aria-label":"Close",onClick:this.closeHandler,children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(v.jsxs)("div",{className:"toast-body",children:[!n&&!l&&Object(v.jsx)("div",{className:"form-group has-danger form__mod",children:Object(v.jsx)("input",{type:"text",value:s,className:d,id:"inputValid",onChange:this.inputFIOHandler,autoComplete:"off",placeholder:"\u0424\u0418\u041e"})}),!l&&Object(v.jsx)("div",{className:"form-group has-danger form__mod",children:Object(v.jsx)("input",{type:"text",value:e,className:h,id:"inputValid",onChange:this.inputNameHandler,autoComplete:"off",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),!l&&Object(v.jsx)("div",{className:"form-group has-danger form__mod",children:Object(v.jsx)("input",{type:"password",value:a,className:b,id:"exampleInputPassword1",onChange:this.inputPassHandler,autoComplete:"off",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),!n&&!l&&Object(v.jsx)("div",{className:"form-group has-danger form__mod",children:Object(v.jsx)("input",{type:"password",value:r,className:b,id:"exampleInputPassword1",onChange:this.confirmPassHandler,autoComplete:"off",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"})}),n&&!l&&Object(v.jsxs)("div",{className:"but_wrap",children:[Object(v.jsx)("button",{type:"button",className:"btn btn-primary btn-sm enter",onClick:this.login,children:"\u0412\u0445\u043e\u0434"}),Object(v.jsx)("button",{type:"button",className:"btn btn-primary btn-sm reg",onClick:this.turnReg,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),!n&&!l&&Object(v.jsx)("div",{className:"but_wrap",children:Object(v.jsx)("button",{type:"button",className:"btn btn-primary btn-sm enter",onClick:this.registration,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}),!p&&n&&Object(v.jsx)("div",{className:"alert alert-dismissible alert-danger message__mod",children:Object(v.jsx)("strong",{children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})}),l&&Object(v.jsxs)("div",{className:"alert alert-dismissible alert-success message__mod",children:[Object(v.jsx)("strong",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430!"})," \u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0430\u0440\u0442\u043e\u0440\u0443 \u0432\u0430\u0448\u0435 \u0424\u0418\u041e \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u0438."]})]})]})}}]),a}(s.a.Component)),P=(a(182),a(183),function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={task_templates:[],tasks:[],towns:[],loaded_template:!1,loaded_tasks:!1,loaded_towns:!1,navDate:new Date,reportDateStart:new Date,reportDateEnd:new Date,reports:[],loaded_report:!1,isAutorizated:!0,registrationOk:!1,userID:-1,authResult:!0},t.pad=function(t){return("00"+t).slice(-2)},t.closeReport=function(){t.setState({loaded_report:!1})},t.exit=function(){console.log("exit"),new C("dev").logout().then((function(e){console.log(e),0===e.status?t.setState({isAutorizated:!1}):console.log("error")}))},t.closeMessage=function(){t.setState({registrationOk:!1})},t.registrate=function(e){new C("dev").registration(e).then((function(e){if(0===e.status)return t.setState({registrationOk:!0}),!0;console.log(e.result)}))},t.authorizate=function(e){t.setState({authResult:!0}),new C("dev").authorization(e).then((function(e){0===e.status?(t.setState({isAutorizated:!0,userID:e.result}),t.loadMainContent()):t.setState({authResult:!1})}))},t.createReport=function(){var e=t.state.reportDateStart,a=t.state.reportDateEnd,n={reportDateStart:"".concat(e.getFullYear(),"-").concat(t.pad(e.getMonth()+1),"-").concat(t.pad(e.getDate())," 00:00:00"),reportDateEnd:"".concat(a.getFullYear(),"-").concat(t.pad(a.getMonth()+1),"-").concat(t.pad(a.getDate())," 23:59:59")};new C("dev").reportTasksDays(n).then((function(e){console.log(e),0===e.status&&t.setState({reports:e.result,loaded_report:!0})}))},t.chandeReportDate=function(e,a){"start"===a&&t.setState({reportDateStart:e}),"end"===a&&t.setState({reportDateEnd:e})},t.changeTown=function(e,a,n){console.log(e,a);var s=Object(o.a)(t.state.tasks);s[a].town_id=e,s[a].town_title=n,t.setState({tasks:s})},t.changeDescription=function(e,a){var n=Object(o.a)(t.state.tasks);n[a].description=e,t.setState({tasks:n})},t.loadMainContent=function(){var e=t.state,a=e.navDate,n=e.isAutorizated,s="".concat(a.getFullYear(),"-").concat(t.pad(a.getMonth()+1),"-").concat(t.pad(a.getDate())," ").concat(t.pad(a.getHours()),":").concat(t.pad(a.getMinutes()),":").concat(t.pad(a.getSeconds()));n&&(new C("dev").getTemplates().then((function(e){0===e.status?t.setState({task_templates:e.result,loaded_templates:!0}):-2===e.status&&t.setState({isAutorizated:!1})})),new C("dev").getTasks({curDate:s}).then((function(e){0===e.status?t.setState({tasks:e.result,loaded_tasks:!0}):-2===e.status&&t.setState({isAutorizated:!1})})),new C("dev").getTowns().then((function(e){0===e.status?t.setState({towns:e.result,loaded_towns:!0}):-2===e.status&&t.setState({isAutorizated:!1})})))},t.existsActiveTask=function(t){return t.length>0&&2===t[0].status},t.deleteTemplateHander=function(e,a){new C("dev").deleteTemplateById(a).then((function(a){var n=t.state.task_templates;n.splice(e,1),t.setState({task_templates:n})}))},t.newTemplateHandler=function(e){var a=Object(o.a)(t.state.task_templates);a.push(e),t.setState({task_templates:a})},t.newTaskHandler=function(e){var a=new Date,n="".concat(a.getFullYear(),"-").concat(t.pad(a.getMonth()+1),"-").concat(t.pad(a.getDate())," ").concat(t.pad(a.getHours()),":").concat(t.pad(a.getMinutes()),":").concat(t.pad(a.getSeconds()));new C("dev").createNewTask({id:e.id,datestart:n}).then((function(n){e.time_start="".concat(t.pad(a.getHours()),":").concat(t.pad(a.getMinutes()),":").concat(t.pad(a.getSeconds())),e.status=2,e.taskId=n.result,e.description="",e.town_id=-1,e.town_title=null;var s=Object(o.a)(t.state.tasks);t.existsActiveTask(s)&&(s[0].status=1,s[0].duration=n.duration),s.push(e),t.setState({tasks:s.sort((function(t,e){return e.status-t.status}))})}))},t.buttonsHandler=function(e){var a=Object(o.a)(t.state.tasks),n=new Date,s="".concat(n.getFullYear(),"-").concat(t.pad(n.getMonth()+1),"-").concat(t.pad(n.getDate())," ").concat(t.pad(n.getHours()),":").concat(t.pad(n.getMinutes()),":").concat(t.pad(n.getSeconds()));switch(e.action){case"pause":new C("dev").actionsFromTask({id:e.id,date:s,action:"pause"}).then((function(n){a[e.index].status=1,a[e.index].duration=n.duration,t.setState({tasks:a})}));break;case"play":new C("dev").actionsFromTask({id:e.id,date:s,action:"play"}).then((function(n){2===a[0].status&&(a[0].status=1,a[0].duration=n.duration),a[e.index].status=2,a.sort((function(t,e){return e.status-t.status})),t.setState({tasks:a})}));break;case"close":new C("dev").actionsFromTask({id:e.id,date:s,action:"close"}).then((function(n){a[e.index].status=0,a[e.index].duration=n.duration,a.sort((function(t,e){return e.status-t.status})),t.setState({tasks:a})}));break;case"save":new C("dev").actionsFromTask({id:e.id,description:e.description,town_id:e.town_id,action:"save"}).then((function(t){console.log(t)}))}},t.changeDate=function(e){var a="".concat(e.getFullYear(),"-").concat(t.pad(e.getMonth()+1),"-").concat(t.pad(e.getDate())," ").concat(t.pad(e.getHours()),":").concat(t.pad(e.getMinutes()),":").concat(t.pad(e.getSeconds()));new C("dev").getTasks({curDate:a}).then((function(a){console.log(a),0===a.status&&t.setState({navDate:e,tasks:a.result,loaded_report:!1})}))},t}return Object(u.a)(a,[{key:"DurationToStr",value:function(t){var e="";return e=this.pad(Math.trunc(t/3600))+":",t-=3600*Math.trunc(t/3600),e=e+this.pad(Math.trunc(t/60))+":",t-=60*Math.trunc(t/60),e+this.pad(t)}},{key:"componentDidMount",value:function(){this.loadMainContent()}},{key:"render",value:function(){var t=this,e=this.state,a=e.task_templates,n=e.loaded_templates,s=e.loaded_tasks,r=e.navDate,c=e.towns,o=e.loaded_towns,i=e.loaded_report,u=e.reports,l=e.reportDateStart,p=e.reportDateEnd,b=e.isAutorizated,j=e.registrationOk,m=e.authResult,f=r.getFullYear()===(new Date).getFullYear()&&r.getMonth()===(new Date).getMonth()&&r.getDate()===(new Date).getDate(),O=Object(v.jsx)(D,{});return!i&&n&&s&&o&&(O=Object(v.jsx)(d.a,{backend:h.a,children:Object(v.jsxs)("div",{className:"main",children:[Object(v.jsx)(L,{tasks:this.state.tasks,towns:c,newTask:this.newTaskHandler,buttonsHandler:this.buttonsHandler,changeDesc:this.changeDescription,changeTown:this.changeTown,isCurDate:f}),Object(v.jsxs)("div",{className:"new-task",children:[Object(v.jsx)(S,{createHandler:this.newTemplateHandler}),Object(v.jsx)("div",{className:"template-list",children:f&&a.map((function(e,a){return Object(v.jsx)(g,{template:e,template_index:a,deleteHandler:t.deleteTemplateHander},a)}))})]})]})})),i&&(O=Object(v.jsx)(E,{rows:u})),Object(v.jsxs)("div",{className:"wrapper",children:[!b&&Object(v.jsx)(B,{authHandler:this.authorizate,registrationOk:j,regHandler:this.registrate,closeMessage:this.closeMessage,authResult:m}),b&&Object(v.jsx)(k,{navDate:this.state.navDate,changeDate:this.changeDate,exit:this.exit}),b&&O,b&&Object(v.jsx)(w,{chandeReportDate:this.chandeReportDate,startDate:l,endDate:p,createReport:this.createReport,closeReport:this.closeReport,reportStat:i})]})}}]),a}(s.a.Component));c.a.render(Object(v.jsx)(P,{}),document.getElementById("root"))},27:function(t,e,a){},84:function(t,e,a){},88:function(t,e,a){}},[[185,1,2]]]);
//# sourceMappingURL=main.7ba17bcc.chunk.js.map